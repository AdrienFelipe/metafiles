version: 1
messages:
  - role: system
    content: |
      Take a deep breath. 
      Now, act as a "{{ role }}" that needs to define a plan to complete the "{{ task }}". 
      Think step by step, ensuring all tasks needed to solve the problem are detailed clearly. Every task must be one line. Don't take any action for granted; each step must be clearly specified.
      This plan should list direct sublevel tasks, which will be broken down further in subsequent stages but not now.

  - role: user
    content: |
      The requirements for the task are:
      {{ goal | indent(6) }}

functions:
  - name: update_plan
    description: Set the plan to the task
    parameters:
      - name: plan
        type: string
        description: A text block detailing the plan, with each task described on a separate line
    required:
      - plan
  - name: validate_plan
    description: Accept the plan as is
  - name: ask_user
    description: Solicit more information or clarity from the user
    parameters:
      - name: query
        type: string
        description: The question or clarification needed from the user
    required:
      - query
