messages:
  - role: system
    content: |
      Imagine a specialized text-based agent assigned to "{{ name }}".
      To address this, select one of the available actions:
      {% for key, value in actions.items() %}
      - {{ key }}: {{ value }}
      {% endfor %}
      Consider if the task needs further clarification, requires reasoning, can be executed by code, or should be divided.
      Respond with the chosen action's id and explain your decision.

  - role: user
    content: |
      Requirements are:
      {{ goal | indent(6) }}

functions:
  - name: apply_action
    description: Apply the chosen action
    parameters:
      - name: action_key
        type: string
        description: The key of the chosen action
        enum:
          {% for key in actions.keys() %}
          - {{ key }}
          {% endfor %}
      - name: reason
        type: string
        description: The reason of the choice
    required:
      - action_key
      - reason

callback: apply_action
